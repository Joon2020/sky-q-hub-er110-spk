/*
* <:copyright-BRCM:2012:DUAL/GPL:standard
* 
*    Copyright (c) 2012 Broadcom Corporation
*    All Rights Reserved
* 
* This program is free software; you can redistribute it and/or modify
* it under the terms of the GNU General Public License, version 2, as published by
* the Free Software Foundation (the "GPL").
* 
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
* 
* 
* A copy of the GPL is available at http://www.broadcom.com/licenses/GPLv2.php, or by
* writing to the Free Software Foundation, Inc., 59 Temple Place - Suite 330,
* Boston, MA 02111-1307, USA.
* 
* :> 
*/

#ifdef __MIPS_C

#include "bl_os_wraper.h"
#include "bl_lilac_soc.h"
#include "bl_lilac_mips_blocks.h"
#include "bl_lilac_pin_muxing.h"

#define CHECK_PIN(pin) \
	if((pin >= LAST_PHYSICAL_PIN) || (pin == 49) || (pin == 50)) \
    { \
        printk("BLMUX : %s(%d):Pin %d out of range, legal range [0, %d), besides 49 and 50 which are not used\n", __FUNCTION__ ,__LINE__ ,pin,LAST_PHYSICAL_PIN); \
        return CE_PIN_OUT_OF_RANGE; \
    } 
/*-------------------------------------------------
        Defines the internal values of the 
        'secondary function' field - as in verilog
-------------------------------------------------*/
typedef enum {
    F_MIPSC_GPIO, 	    /*0 */      
    F_MIPSD_GPIO,       /*1 */      
    F_RUNNER_GPIO,      /*2 */     
    F_VOIP_GPIO,	    /*3 */       
    F_MIPSC_TIMER,	    /*4 */     
    F_MIPSD_TIMER,	    /*5 */     
    F_I1588_ALARM,      /*6 */      
    F_I1588_1PPS, 	    /*7 */ 
    F_INPUT_FUNCTION,   /*8 */
    F_NOT_USED,         /*9 */
    F_I2C_SCL, 	        /*10*/        
    F_I2C_SDA,		    /*11*/        
    F_GPON_SYNC ,	    /*12*/       
    F_USB0_PRT_PWR,     /*13*/    
    F_USB1_PRT_PWR,     /*14*/ 
    F_DEBUG_BUS,        /*15*/
    F_TEST_CDR,         /*16*/
    F_NAND_FLASH_CEN,   /*17*/  
    F_NAND_FLASH_WPN,   /*18*/  
    F_USB_TEST,         /*19*/
    F_VOIP_EJTAG,       /*20*/ 
    F_VOIP_TIMER0_IRQ,  /*21*/ 
    F_VOIP_TIMER0_PWM,  /*22*/ 
    F_VOIP_TIMER1_IRQ,  /*23*/ 
    F_VOIP_TIMER1_PWM,  /*24*/ 
    F_MIPSD_UART_TXD,   /*25*/
    F_SPI_FLASH_CSN,    /*26*/   
    F_SPI_FLASH_WPN,    /*27*/ 
    F_MISC ,            /*28*/
    F_BOOT_FAIL,	    /*29*/
    F_ALWAYS_0,         /*30*/ 
    F_ALWAYS_1          /*31*/ 
} PIN_MUXING_SECONDARY_FUNCTION_VALUES;  

/* register offset into the RGMII pads, for the TX pins */
#define RGMII_PINS  6

/*-------------------------------------------------
        Defines the internal values of the 
        function - spread some of functions
        according to controller and/or number
-------------------------------------------------*/
enum 
{
    GPIOC = 35,     GPIOD,          GPIOR,          GPIOV,      /* 35 - 38 */
    TIMER0C,        TIMER1C,        TIMER2C,        TIMER3C,    /* 39 - 42 */        
    TIMER0D,        TIMER1D,        TIMER2D,        TIMER3D,    /* 43 - 46 */        
    USB0_PRT_WR,    USB1_PRT_WR,    USB0_OVRCUR,    USB1_OVRCUR,/* 47 - 50 */     
    VOIP_TIMER0IRQ, VOIP_TIMER0PWM, VOIP_TIMER1IRQ, VOIP_TIMER1PWM,/* 51 - 54 */
    INTERRUPT0C,    INTERRUPT1C,    INTERRUPT2C,    INTERRUPT3C,    /* 55 - 58 */
    INTERRUPT4C,    INTERRUPT5C,    INTERRUPT6C,    INTERRUPT7C,    /* 59 - 62 */
    INTERRUPT8C,    INTERRUPT9C,    INTERRUPT0D,    INTERRUPT1D,    /* 63 - 66 */
    INTERRUPT3D,    INTERRUPT4D,    INTERRUPT2D,    INTERRUPT5D,    /* 67 - 70 */
    INTERRUPT6D,    INTERRUPT7D,    INTERRUPT8D,    INTERRUPT9D,    /* 71 - 74 */
    FSPI_CLK_I,     SPI_CLK_I,
    REAL_FUNCTIONS_NUMBER,
	CLOCK_FUNCTION   = 0xFF,
	PRIMARY_FUNCTION = 0xEE,
} PIN_MUXING_REAL_FUNCTION_VALUES;


/*-------------------------------------------------
    The value to be written into pad register for
    each function. The index into this table is 
    the internal function, after it was translated 
    from the user's function
-------------------------------------------------*/
static uint32_t pin_functions [REAL_FUNCTIONS_NUMBER] =
{
    F_I1588_ALARM,    /* I1588_ALARM     */
    F_I1588_1PPS,     /* I1588_1PPS      */
    F_INPUT_FUNCTION, /* I1588_CAPTURE   */
    F_INPUT_FUNCTION, /* I1588_VCXO      */
    F_I2C_SCL,        /* I2C_SCL_OUT     */
    F_I2C_SDA,        /* I2C_SDA_OUT     */
    F_INPUT_FUNCTION, /* I2C_SCL_IN      */
    F_INPUT_FUNCTION, /* I2C_SDA_IN      */
    F_GPON_SYNC,      /* RX_GPON_SYNC    */
    F_NAND_FLASH_CEN, /* NFMC_CEN  	     */
    F_NAND_FLASH_WPN, /* NFMC_WPN        */
    F_BOOT_FAIL,      /* NFMC_BOOT_FAIL  */ 
    F_SPI_FLASH_CSN,  /* SPI_FLASH_CSN   */
    F_SPI_FLASH_WPN,  /* SPI_FLASH_WPN   */
    F_MISC,           /* GRX_TDM_DATA    */
    F_MISC,           /* GRX_TDM_CLK     */
    F_BOOT_FAIL,      /* DSP_TDM_TXCLK   */
    F_BOOT_FAIL,      /* DSP_TDM_RXCLK   */
    F_INPUT_FUNCTION, /* GTX_FROM_GPIO   */
    F_MIPSD_UART_TXD, /* MIPSD_UART_TX   */
    F_INPUT_FUNCTION, /* MIPSD_UART_RX   */
    CLOCK_FUNCTION,   /* CLK_GPON_8KHz   */
    CLOCK_FUNCTION,   /* CLK_25_MHz      */
    CLOCK_FUNCTION,   /* CLK10_MHz_1588  */
    CLOCK_FUNCTION,   /* CLK10_MHz_SYNC  */
    PRIMARY_FUNCTION, /* SYNC_CLK_F      */
    PRIMARY_FUNCTION, /* CDR_TX_EN_P_F   */
    PRIMARY_FUNCTION, /* CDR_TX_EN_N_F   */
    PRIMARY_FUNCTION, /* NAND             */
    PRIMARY_FUNCTION, /* FSPI            */
    PRIMARY_FUNCTION, /* MDC_MDIO        */
    PRIMARY_FUNCTION, /* RGMII           */
    PRIMARY_FUNCTION, /* MII             */
    PRIMARY_FUNCTION, /* SPI             */
    PRIMARY_FUNCTION, /* TDM             */
    F_MIPSC_GPIO,     /* GPIOC           */
    F_MIPSD_GPIO,     /* GPIOD           */
    F_RUNNER_GPIO,    /* GPIOR           */
    F_VOIP_GPIO,      /* GPIOV           */
    F_MIPSC_TIMER,    /* TIMER0C         */
    F_MIPSC_TIMER,    /* TIMER1C         */
    F_MIPSC_TIMER,    /* TIMER2C         */
    F_MIPSC_TIMER,    /* TIMER3C         */ 
    F_MIPSD_TIMER,    /* TIMER0D         */
    F_MIPSD_TIMER,    /* TIMER1D         */
    F_MIPSD_TIMER,    /* TIMER2D         */
    F_MIPSD_TIMER,    /* TIMER3D         */
    F_USB0_PRT_PWR,   /* USB0_PRT_WR     */
    F_USB1_PRT_PWR,   /* USB1_PRT_WR     */
    F_INPUT_FUNCTION, /* USB0_OVRCUR     */
    F_INPUT_FUNCTION, /* USB1_OVRCUR     */
    F_VOIP_TIMER0_IRQ,/* VOIP_TIMER0IRQ  */
    F_VOIP_TIMER0_PWM,/* VOIP_TIMER0PWM  */
    F_VOIP_TIMER1_IRQ,/* VOIP_TIMER1IRQ  */
    F_VOIP_TIMER0_PWM,/* VOIP_TIMER1PWM  */
    F_INPUT_FUNCTION, /* INTERRUPT0C     */
    F_INPUT_FUNCTION, /* INTERRUPT1C     */
    F_INPUT_FUNCTION, /* INTERRUPT2C     */
    F_INPUT_FUNCTION, /* INTERRUPT3C     */
    F_INPUT_FUNCTION, /* INTERRUPT4C     */
    F_INPUT_FUNCTION, /* INTERRUPT5C     */
    F_INPUT_FUNCTION, /* INTERRUPT6C     */
    F_INPUT_FUNCTION, /* INTERRUPT7C     */
    F_INPUT_FUNCTION, /* INTERRUPT8C     */
    F_INPUT_FUNCTION, /* INTERRUPT9C     */
    F_INPUT_FUNCTION, /* INTERRUPT0D     */
    F_INPUT_FUNCTION, /* INTERRUPT1D     */
    F_INPUT_FUNCTION, /* INTERRUPT2D     */
    F_INPUT_FUNCTION, /* INTERRUPT3D     */
    F_INPUT_FUNCTION, /* INTERRUPT4D     */
    F_INPUT_FUNCTION, /* INTERRUPT5D     */
    F_INPUT_FUNCTION, /* INTERRUPT6D     */
    F_INPUT_FUNCTION, /* INTERRUPT7D     */
    F_INPUT_FUNCTION, /* INTERRUPT8D     */
    F_INPUT_FUNCTION, /* INTERRUPT9D     */
    CLOCK_FUNCTION,   /* FSPI_CLK        */
    CLOCK_FUNCTION    /* SPI_CLK         */
};
/*-------------------------------------------------
    The table gives the permission to connect a pin
    to a function. The rows are the pin number and
    the columns are the internal functions
-------------------------------------------------*/
uint32_t pin_connections [LAST_PHYSICAL_PIN][REAL_FUNCTIONS_NUMBER] = {
/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
/*      |           I1588               |           I2C                       |           |       NFMC         |SPI_FLASH |   GRX_TDM  |     DSP_TDM   |               |  D_UART   |                        CLK                     | CDR_TX_EN |     |      |          |       |     |     |     |       GPIO    |              TIMERS                   |             USB             |        VOIP_TIMER         |               INTERRUPT_C             |              INTERRUPT_D              |      |      */
/* pad  | ALARM | 1PPS | CAPTURE | VCXO | SCL_OUT | SDA_OUT | SCL_IN | SDA_IN |  PON_SYNC | CEN | WPN | BOOT_F |CSN | WPN | DATA | CLK | RXCLK | TXCLK | GTX_FROM_GPIO |  TX | RX  | GPON_8K | CLK_25M | 10M_1588 | 10M_SYNC | SYNC | P_F | N_F | NAND| FSPI | MDC_MDIO | RGMII | MII | SPI | TDM | C | D | R | V | 0C | 1C | 2C | 3C | 0D | 1D | 2D | 3D | 0_PRT | 1_PRT | 0_OC | 1_OC | 0IRQ | 0PWM | 1IRQ | 1PWM | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | FSPI | SPI  */
/*      |       |      |         |      |         |         |        |        |           |     |     |        |    |     |      |     |       |       |               |     |     |         |         |          |          |      |     |     |     |      |          |       |     |     |     |   |   |   |   |    |    |    |    |    |    |    |    |       |       |      |      |      |      |      |      |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   | _CLK | _CLK */
/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
/* 0 */ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     1,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  1,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 1 */ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  1,  0,   1,   0,   0,   0,   1,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 2 */ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        1,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  1,  0,   0,   1,   0,   0,   0,   1,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },     
/* 3 */ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          1,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  1,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 4 */ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        1,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  1,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 5 */ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      1,        0,        0,          0,      1,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  1,  0,   1,   0,   0,   0,   1,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 6 */ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     1,      0,        0,     0,    0,    0,   1,  1,  1,  1,  0,   0,   1,   0,   0,   0,   1,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  0,  0,    0,    0 }, 
/* 7 */ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  1,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  0,    1,    0 },     
/* 8 */ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     1,      0,        0,     0,    0,    0,   1,  1,  1,  1,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,    0,    0 }, 
/* 9 */ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     1,      0,        0,     0,    0,    0,   1,  1,  1,  1,  0,   1,   0,   0,   0,   1,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 10*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  1,  0,   0,   1,   0,   0,   0,   1,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 11*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  1,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 12*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  1,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },     
/* 13*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  1,  0,   1,   0,   0,   0,   1,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 14*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  1,  0,   0,   1,   0,   0,   0,   1,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 15*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  1,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 16*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 17*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  0,   1,   0,   0,   0,   1,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },     
/* 18*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  0,   0,   1,   0,   0,   0,   1,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 19*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 20*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
/*      |           I1588               |           I2C                       |           |       NFMC         |SPI_FLASH |   GRX_TDM  |     DSP_TDM   |               |  D_UART   |                        CLK                     | CDR_TX_EN |     |      |          |       |     |     |     |       GPIO    |              TIMERS                   |             USB             |        VOIP_TIMER         |               INTERRUPT_C             |              INTERRUPT_D              |      |      */
/* pad  | ALARM | 1PPS | CAPTURE | VCXO | SCL_OUT | SDA_OUT | SCL_IN | SDA_IN |  PON_SYNC | CEN | WPN | BOOT_F |CSN | WPN | DATA | CLK | RXCLK | TXCLK | GTX_FROM_GPIO |  TX | RX  | GPON_8K | CLK_25M | 10M_1588 | 10M_SYNC | SYNC | P_F | N_F | NAND| FSPI | MDC_MDIO | RGMII | MII | SPI | TDM | C | D | R | V | 0C | 1C | 2C | 3C | 0D | 1D | 2D | 3D | 0_PRT | 1_PRT | 0_OC | 1_OC | 0IRQ | 0PWM | 1IRQ | 1PWM | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | FSPI | SPI  */
/*      |       |      |         |      |         |         |        |        |           |     |     |        |    |     |      |     |       |       |               |     |     |         |         |          |          |      |     |     |     |      |          |       |     |     |     |   |   |   |   |    |    |    |    |    |    |    |    |       |       |      |      |      |      |      |      |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   | _CLK | _CLK */
/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
/* 21*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  0,   1,   0,   0,   0,   1,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 22*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  0,   0,   1,   0,   0,   0,   1,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },     
/* 23*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 24*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 25*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      1,     0,    0,    1,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  0,   1,   0,   0,   0,   1,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 26*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      1,        0,     0,    0,    0,   1,  1,  1,  0,  0,   0,   1,   0,   0,   0,   1,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 27*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      1,        0,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },     
/* 28*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 29*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  0,   1,   0,   0,   0,   1,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 30*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     1,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      1,        0,     0,    0,    1,   1,  1,  1,  0,  0,   0,   1,   0,   0,   0,   1,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 31*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      1,        0,     0,    0,    1,   1,  1,  1,  0,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 32*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      1,        0,     0,    0,    1,   1,  1,  1,  0,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },     
/* 33*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    1,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      1,        0,     0,    0,    1,   1,  1,  1,  0,  0,   1,   0,   0,   0,   1,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 34*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      1,        0,     0,    0,    1,   1,  1,  1,  0,  0,   0,   1,   0,   0,   0,   1,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 35*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     1,     0,      1,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      1,        0,     0,    0,    1,   1,  1,  1,  0,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 36*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     1,    0,    0,   1,  1,  1,  0,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 37*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     1,    0,    0,   1,  1,  1,  0,  0,   1,   0,   0,   0,   1,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },     
/* 38*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     1,    0,    0,   1,  1,  1,  0,  0,   0,   1,   0,   0,   0,   1,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 39*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     1,    0,    0,   1,  1,  1,  0,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,    0,    0 },
/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
/*      |           I1588               |           I2C                       |           |       NFMC         |SPI_FLASH |   GRX_TDM  |     DSP_TDM   |               |  D_UART   |                        CLK                     | CDR_TX_EN |     |      |          |       |     |     |     |       GPIO    |              TIMERS                   |             USB             |        VOIP_TIMER         |               INTERRUPT_C             |              INTERRUPT_D              |      |      */
/* pad  | ALARM | 1PPS | CAPTURE | VCXO | SCL_OUT | SDA_OUT | SCL_IN | SDA_IN |  PON_SYNC | CEN | WPN | BOOT_F |CSN | WPN | DATA | CLK | RXCLK | TXCLK | GTX_FROM_GPIO |  TX | RX  | GPON_8K | CLK_25M | 10M_1588 | 10M_SYNC | SYNC | P_F | N_F | NAND| FSPI | MDC_MDIO | RGMII | MII | SPI | TDM | C | D | R | V | 0C | 1C | 2C | 3C | 0D | 1D | 2D | 3D | 0_PRT | 1_PRT | 0_OC | 1_OC | 0IRQ | 0PWM | 1IRQ | 1PWM | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | FSPI | SPI  */
/*      |       |      |         |      |         |         |        |        |           |     |     |        |    |     |      |     |       |       |               |     |     |         |         |          |          |      |     |     |     |      |          |       |     |     |     |   |   |   |   |    |    |    |    |    |    |    |    |       |       |      |      |      |      |      |      |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   | _CLK | _CLK */
/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
/* 40*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    1,    0,   1,  1,  1,  0,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 41*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    1,    0,   1,  1,  1,  0,  0,   1,   0,   0,   0,   1,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 42*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    1,    0,   1,  1,  1,  0,  0,   0,   1,   0,   0,   0,   1,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },     
/* 43*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,    0,    1 }, 
/* 44*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    1,    0,   1,  1,  1,  0,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  0,  0,  0,    0,    0 },
/* 45*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     1,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  0,   1,   0,   0,   0,   1,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 46*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    1,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  0,   0,   1,   0,   0,   0,   1,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 47*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },     
/* 48*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   0,   0,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 49*/ {   0,     0,      0,       0,      0,        0,        0,      0,         0,        0,    0,     0,     0,    0,    0,     0,     0,      0,          0,          0,   0,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   0,  0,  0,  0,  0,   0,   0,   0,   0,   0,   0,   0,     0,      0,     0,     0,      0,    0,      0,     0,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 50*/ {   0,     0,      0,       0,      0,        0,        0,      0,         0,        0,    0,     0,     0,    0,    0,     0,     0,      0,          0,          0,   0,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        0,     0,    0,    0,   0,  0,  0,  0,  0,   0,   0,   0,   0,   0,   0,   0,     0,      0,     0,     0,      0,    0,      0,     0,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 51*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        1,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 52*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        1,     0,    0,    0,   1,  1,  1,  0,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },     
/* 53*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        1,     0,    0,    0,   1,  1,  1,  0,  0,   1,   0,   0,   0,   1,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 54*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        1,     0,    0,    0,   1,  1,  1,  0,  0,   0,   1,   0,   0,   0,   1,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 55*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        1,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   1,   0,   0,   0,   1,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 56*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        1,     0,    0,    0,   1,  1,  1,  0,  1,   0,   0,   0,   1,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 57*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        1,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   0,   0,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },     
/* 58*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        1,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   0,   0,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 59*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        1,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   0,   0,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 60*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        1,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   0,   0,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 },
/* 61*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        1,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   0,   0,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }, 
/* 62*/ {   1,     1,      1,       0,      1,        1,        1,      1,         1,        1,    1,     0,     1,    1,    0,     0,     0,      0,          1,          1,   1,      0,        0,        0,          0,      0,     0,    0,    0,     0,      0,        1,     0,    0,    0,   1,  1,  1,  0,  0,   0,   0,   0,   0,   0,   0,   0,     1,      1,     1,     1,      1,    1,      1,     1,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,    0,    0 }
/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
/*      |           I1588               |           I2C                       |           |       NFMC         |SPI_FLASH |   GRX_TDM  |     DSP_TDM   |               |  D_UART   |                        CLK                     | CDR_TX_EN |     |      |          |       |     |     |     |       GPIO    |              TIMERS                   |             USB             |        VOIP_TIMER         |               INTERRUPT_C             |              INTERRUPT_D              |      |      */
/* pad  | ALARM | 1PPS | CAPTURE | VCXO | SCL_OUT | SDA_OUT | SCL_IN | SDA_IN |  PON_SYNC | CEN | WPN | BOOT_F |CSN | WPN | DATA | CLK | RXCLK | TXCLK | GTX_FROM_GPIO |  TX | RX  | GPON_8K | CLK_25M | 10M_1588 | 10M_SYNC | SYNC | P_F | N_F | NAND| FSPI | MDC_MDIO | RGMII | MII | SPI | TDM | C | D | R | V | 0C | 1C | 2C | 3C | 0D | 1D | 2D | 3D | 0_PRT | 1_PRT | 0_OC | 1_OC | 0IRQ | 0PWM | 1IRQ | 1PWM | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | FSPI | SPI  */
/*      |       |      |         |      |         |         |        |        |           |     |     |        |    |     |      |     |       |       |               |     |     |         |         |          |          |      |     |     |     |      |          |       |     |     |     |   |   |   |   |    |    |    |    |    |    |    |    |       |       |      |      |      |      |      |      |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   | _CLK | _CLK */
/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
};
/*-------------------------------------------------
    Human interface for the internal values of the 
     'secondary function' field
-------------------------------------------------*/
static char *function_name [32] =
{
    "GPIO_C",       /* 0 */
    "GPIO_D",       /* 1 */
    "GPIO_RUNNER",  /* 2 */
    "GPIO_VOIP",    /* 3 */
    "TIMER_C",      /* 4 */
    "TIMER_D",      /* 5 */
    "1588_ALARM",   /* 6 */ 
    "1588_CLK_1PPS",/* 7 */
    "INPUT",        /* 8 */
    "UNKNOWN",      /* 9 */
    "I2C_SCL",      /* 10 */
    "I2C_SDA",      /* 11 */
    "GTX_FROM_GPIO",/* 12 */
    "USB0_PRT_PWR", /* 13 */
    "USB1_PRT_PWR", /* 14 */
    "DEBUG_BUS",    /* 15 */
    "TEST_CDR",     /* 16 */
    "NAND_CEN",     /* 17 */
    "NAND_WPN",     /* 18 */
    "USB_TEST",     /* 19 */
    "VOIP_EJTAG",   /* 20 */
    "VOIP_TIMER0_IRQ",/* 21 */
    "VOIP_TIMER0_PWM",/* 22 */
    "VOIP_TIMER1_IRQ",/* 23 */
    "VOIP_TIMER1_PWM",/* 24 */
    "MIPSD_UART",   /* 25 */
    "SPI_CSN",      /* 26 */
    "SPI_WPN",      /* 27 */
    "MISC",         /* 28 */
    "BOOT_FAIL",    /* 29 */
    "ALWAYS_0",     /* 30 */
    "ALWAYS_1"      /* 31 */
};

/*----------------------------------------------------
                   Static procedures
----------------------------------------------------*/
static int32_t p_internal_function (LILAC_PIN_FUNCTION function, uint32_t number, BL_LILAC_CONTROLLER controller );
static uint32_t calculate_entry(uint32_t pin);
static MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_DTE read_entry(LILAC_PHYSICAL_PIN pin);
static void write_entry(MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_DTE data, LILAC_PHYSICAL_PIN pin );
static void get_selected_io (uint32_t pin, char *function);
static LILAC_PIN_MUXING_RETURN_CODE f_mux_i2c_pins (LILAC_PIN_FUNCTION function, LILAC_PHYSICAL_PIN pin);

/********************************************************
    Connect pin to function
********************************************************/
LILAC_PIN_MUXING_RETURN_CODE fi_bl_lilac_mux_connect_pin (LILAC_PHYSICAL_PIN pin, LILAC_PIN_FUNCTION function, uint32_t number, BL_LILAC_CONTROLLER controller )
{
    int32_t internal_function;
    volatile MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_DTE destination;
    volatile MIPS_BLOCKS_VPB_BRIDGE_USB_OVRCUR0_SEL_DTE selection;

    CHECK_PIN(pin)

    if(function >= LAST_PIN_FUNCTION)
    {
        printk("BLMUX : %s(%d):Function %d out of range, legal range [0, %d)\n", __FUNCTION__ ,__LINE__ ,function,LAST_PIN_FUNCTION);
        return CE_PIN_FUNCTION_OUT_OF_RANGE; 
    }

    if((function >= I2C_SCL_OUT) && (function <= I2C_SDA_IN))
    {
        return f_mux_i2c_pins(function,pin);
    }

    internal_function = p_internal_function(function, number, controller);
	
    if(internal_function < 0) 
        return -internal_function ;

    destination = read_entry(pin);

	if ((function == ALWAYS_0) || (function == ALWAYS_1))
	{
		destination.sec = internal_function ;
		destination.clk = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_CLK_DISABLE_VALUE ;
		destination.pri = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_DISABLE_VALUE;
		write_entry(destination,pin);
		return BL_LILAC_SOC_OK;
	}
	
	if(!pin_connections[pin][internal_function])
	{
		printk("BLMUX : %s(%d):Pin - Function combination is not legal : %d %d\n", __FUNCTION__ ,__LINE__ ,pin,function);
		return CE_PIN_FUNCTION_ILEGAL_COMBITATION; 
	}

	/*  check for clock functions */
	if(pin_functions[internal_function] == CLOCK_FUNCTION) 
	{
		destination.clk = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_CLK_ENABLE_VALUE;
		destination.sec = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_SEC_DEFAULT_VALUE ;
		destination.pri = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_ENABLE_VALUE;
		write_entry(destination,pin);
		return BL_LILAC_SOC_OK;
	}
	
	/* all one direction pins  */
	if(pin >= ONE_DIRECTION_PINS)
	{
		if(function == RGMII)
		{
			destination.pdn = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_PDN_ENABLED_VALUE;
			destination.sec = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_SEC_DEFAULT_VALUE ;
			destination.clk = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_CLK_DISABLE_VALUE ;
			destination.pri = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_ENABLE_VALUE;
		}
		else 
		{
			if(pin < GPIO_ONLY_OUT_MIN) /* pins input only */
			{
				destination.pdn = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_PDN_ENABLED_VALUE;
				selection.sel = pin;

				switch (internal_function)
				{
					case USB0_OVRCUR:
						BL_MIPS_BLOCKS_VPB_BRIDGE_USB_OVRCUR0_SEL_WRITE(selection);
						break;
					case USB1_OVRCUR:
						BL_MIPS_BLOCKS_VPB_BRIDGE_USB_OVRCUR1_SEL_WRITE(selection);
						break;
					case MIPSD_UART_RX:
						BL_MIPS_BLOCKS_VPB_BRIDGE_MIPSD_UART_RXD_SEL_WRITE(selection);
						break;
					case GTX_FROM_GPIO:
						BL_MIPS_BLOCKS_VPB_BRIDGE_GPN_TXEN_LP_SEL_WRITE(selection);
						break;
					case I1588_CAPTURE:
						BL_MIPS_BLOCKS_VPB_BRIDGE_MS1588_CAPTURE_SEL_WRITE(selection);
						break;
					default:
						break;
				}

			}
			else /* pins output only */
			{
				destination.pdn = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_PDN_DISABLED_VALUE;
				destination.sec = pin_functions[internal_function];
			}
			
			destination.clk = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_CLK_DISABLE_VALUE ;
			destination.pri = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_DISABLE_VALUE;
		}
		
		write_entry(destination,pin); 
		
		return BL_LILAC_SOC_OK;
		
	}
        
	/*  check for primary functions */
	if(pin_functions[internal_function] == PRIMARY_FUNCTION)
	{
		destination.sec = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_SEC_DEFAULT_VALUE ;
		destination.clk = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_CLK_DISABLE_VALUE ;
		destination.pri = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_ENABLE_VALUE;
		write_entry(destination,pin);
		return BL_LILAC_SOC_OK;
	}
        
        
	destination.sec = pin_functions[internal_function];
	destination.clk = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_CLK_DISABLE_VALUE ;
	destination.pri = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_DISABLE_VALUE;
	selection.sel = pin;
        
	switch (internal_function)
	{
		case USB0_OVRCUR:
			BL_MIPS_BLOCKS_VPB_BRIDGE_USB_OVRCUR0_SEL_WRITE(selection);
			break;
		case USB1_OVRCUR:
			BL_MIPS_BLOCKS_VPB_BRIDGE_USB_OVRCUR1_SEL_WRITE(selection);
			break;
		case MIPSD_UART_RX:
			BL_MIPS_BLOCKS_VPB_BRIDGE_MIPSD_UART_RXD_SEL_WRITE(selection);
			break;
		case GTX_FROM_GPIO:
			BL_MIPS_BLOCKS_VPB_BRIDGE_GPN_TXEN_LP_SEL_WRITE(selection);
			break;
		case I1588_CAPTURE:
			BL_MIPS_BLOCKS_VPB_BRIDGE_MS1588_CAPTURE_SEL_WRITE(selection);
			break;
		default:
			break;
	}
	
    write_entry(destination,pin);

    return BL_LILAC_SOC_OK;
}
EXPORT_SYMBOL(fi_bl_lilac_mux_connect_pin);

/********************************************************
    Set 'mipsd-uart-txd_out' pin as output thru 'tx' pin
    Set 'UART_RXD' pin as input from 'rx' pin
********************************************************/
LILAC_PIN_MUXING_RETURN_CODE fi_bl_lilac_mux_uartd(LILAC_PHYSICAL_PIN tx_pin, LILAC_PHYSICAL_PIN rx_pin)
{
    fi_bl_lilac_mux_connect_pin(rx_pin, MIPSD_UART_RX, 0, MIPSD);
    fi_bl_lilac_mux_connect_pin(tx_pin, MIPSD_UART_TX, 0, MIPSD);

    return BL_LILAC_SOC_OK;
}
EXPORT_SYMBOL(fi_bl_lilac_mux_uartd);

/********************************************************
    Configure all the RGMII pins to rgmii function
********************************************************/
LILAC_PIN_MUXING_RETURN_CODE fi_bl_lilac_mux_rgmii (void)
{
    fi_bl_lilac_mux_connect_pin(RGMII_TX_D_0, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_TX_D_1, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_TX_D_2, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_TX_D_3, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_TX_CLK, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_TX_CTL, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_RX_D_0, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_RX_D_1, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_RX_D_2, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_RX_D_3, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_RX_CLK, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_RX_CTL, RGMII, 0, MIPSC); 

    return BL_LILAC_SOC_OK;
}
EXPORT_SYMBOL(fi_bl_lilac_mux_rgmii);

/********************************************************
    Configure all the MII pins to mii function
********************************************************/
LILAC_PIN_MUXING_RETURN_CODE fi_bl_lilac_mux_mii (void)
{
    fi_bl_lilac_mux_rgmii();
    fi_bl_lilac_mux_connect_pin(MII_CRS,    MII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(MII_COL,    MII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(MII_TX_CLK, MII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(MII_RX_ERR, MII, 0, MIPSC);

    return BL_LILAC_SOC_OK;
}

EXPORT_SYMBOL(fi_bl_lilac_mux_mii);

/********************************************************
    Configure all the MDC_MDIO pins to mdc_mdio function
********************************************************/
LILAC_PIN_MUXING_RETURN_CODE fi_bl_lilac_mux_mdc_mdio (void)
{
    fi_bl_lilac_mux_connect_pin(MDC,  MDC_MDIO, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(MDIO, MDC_MDIO, 0, MIPSC); 

    return BL_LILAC_SOC_OK;
}
EXPORT_SYMBOL(fi_bl_lilac_mux_mdc_mdio);

/********************************************************
    Configure all the TDM pins to tdm function
********************************************************/
LILAC_PIN_MUXING_RETURN_CODE fi_bl_lilac_mux_tdm (void)
{
    fi_bl_lilac_mux_connect_pin(TDM_RXD,    TDM, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(TDM_RX_CLK, TDM, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(TDM_RX_FSP, TDM, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(TDM_TXD,	TDM, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(TDM_TX_FSP, TDM, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(TDM_TX_CLK, TDM, 0, MIPSC); 

    return BL_LILAC_SOC_OK;
}
EXPORT_SYMBOL(fi_bl_lilac_mux_tdm);

/********************************************************
    Configure all the SPI pins to spi function
********************************************************/
LILAC_PIN_MUXING_RETURN_CODE fi_bl_lilac_mux_spi (void)
{
    /* Need to be connected externally
    fi_bl_lilac_mux_connect_pin(SPI_CS_0, SPI, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(SPI_CS_1, SPI, 0, MIPSC);
    */
    fi_bl_lilac_mux_connect_pin(SPI_TXD,  SPI, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(SPI_CLK,  F_SPI_CLK, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(SPI_RXD,  SPI, 0, MIPSC);

    return BL_LILAC_SOC_OK;
}
EXPORT_SYMBOL(fi_bl_lilac_mux_spi);

/********************************************************
    Configure all the FSPI pins to fspi function
********************************************************/
LILAC_PIN_MUXING_RETURN_CODE fi_bl_lilac_mux_fspi (void)
{
    /* Need to be connected externally
    fi_bl_lilac_mux_connect_pin(FSPI_CS_0, FSPI, 0, MIPSC);
    */
    fi_bl_lilac_mux_connect_pin(FSPI_CLK,  F_FSPI_CLK, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FSPI_RXD,  FSPI, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FSPI_TX,   FSPI, 0, MIPSC);

    return BL_LILAC_SOC_OK;
}
EXPORT_SYMBOL(fi_bl_lilac_mux_fspi);

/********************************************************
    Configure all the NAND pins to NAND function
********************************************************/
LILAC_PIN_MUXING_RETURN_CODE fi_bl_lilac_mux_nand (void)
{
    fi_bl_lilac_mux_connect_pin(FMI_D_0,       NAND, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FMI_D_1,       NAND, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FMI_D_2,       NAND, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FMI_D_3,       NAND, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FMI_D_4,       NAND, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FMI_D_5,       NAND, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FMI_D_6,       NAND, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FMI_D_7,       NAND, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FMI_CLE,       NAND, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FMI_ALE,       NAND, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FMI_CS_0,      NAND, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FMI_WE,        NAND, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FMI_RE,        NAND, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(FMI_RDY_BSY_N, NAND, 0, MIPSC); 

    return BL_LILAC_SOC_OK;
}
EXPORT_SYMBOL(fi_bl_lilac_mux_nand);

/********************************************************
    Configure the electrical part of any given pin
********************************************************/
LILAC_PIN_MUXING_RETURN_CODE fi_bl_lilac_mux_config_pin_pull (LILAC_PHYSICAL_PIN pin, PIN_PULL parameters)
{
    volatile MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_DTE dest_io;
    volatile MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_DTE destination;

	CHECK_PIN(pin)

    if(!parameters)
        return CE_PIN_NULL_POINTER;

    destination = read_entry(pin);

    if (pin >= ONE_DIRECTION_PINS)
    {
        if((parameters < FASTEST) || (parameters > SLOWEST)) 
            return CE_PIN_WRONG_SLEW;
		
        destination.slew  = parameters ;
    }
	else
    {
        if((parameters < PULL_DOWN) || (parameters > PULL_Z)) 
            return CE_PIN_WRONG_PULL;
		
        dest_io = *(MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_DTE*) & destination;
		
        if(parameters == PULL_Z)
            dest_io.pe = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PE_DISABLE_VALUE ;
        else
        {
            dest_io.pe = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PE_ENABLE_VALUE ;
            dest_io.ps = parameters ;
        }
		
        destination = *(MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_DTE*) & dest_io;
    }
   
    write_entry(destination,pin);

    return BL_LILAC_SOC_OK; 
}
EXPORT_SYMBOL( fi_bl_lilac_mux_config_pin_pull );

/********************************************************
    Configure the electrical part of any given pin
********************************************************/
LILAC_PIN_MUXING_RETURN_CODE fi_bl_lilac_mux_config_pin_strength (LILAC_PHYSICAL_PIN pin, PIN_STRENGTH parameters)
{
    volatile MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_DTE dest_io;
    volatile MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_DTE destination;

	CHECK_PIN(pin)

    if(!parameters)
        return CE_PIN_NULL_POINTER;

    destination = read_entry(pin);

	if (pin >= ONE_DIRECTION_PINS)
    {
        if((parameters < DS6MA) || (parameters > DS8MA)) 
            return CE_PIN_WRONG_STRENGTH;
        destination.ds  = parameters ;
    }
	else
    {
        if((parameters < S6MA) || (parameters > S10MA)) 
            return CE_PIN_WRONG_STRENGTH;
        dest_io = *(MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_DTE*) & destination;
        dest_io.ds  = parameters ;
        destination = *(MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_DTE*) & dest_io;
    }

    write_entry(destination,pin);

    return BL_LILAC_SOC_OK; 
}
EXPORT_SYMBOL( fi_bl_lilac_mux_config_pin_strength );
/********************************************************
    Return IO pin definition
********************************************************/
LILAC_PIN_MUXING_RETURN_CODE fi_bl_lilac_mux_get_config_pin_pull (LILAC_PHYSICAL_PIN pin, PIN_PULL* parameters, char *function, char *input_selected)
{
    volatile MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_DTE dest_io;
    volatile MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_DTE destination;
    int dest;

	CHECK_PIN(pin)

    if(!parameters || !function)
        return CE_PIN_NULL_POINTER;

    destination = read_entry(pin); 

    if(pin >= ONE_DIRECTION_PINS)
    {
        *parameters = destination.slew;
    }
	else
	{
		dest_io = *(MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_DTE*) & destination;
		if (dest_io.pe == CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PE_DISABLE_VALUE)
			*parameters = PULL_Z ;
		else
			*parameters = dest_io.ps ;
	}
	
    if(input_selected)
        *input_selected = '\0';

    if(destination.clk == CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_CLK_ENABLE_VALUE)
        strcpy(function,"CLOCK");
    else if(destination.pri == CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_ENABLE_VALUE)
        strcpy(function,"PRIMARY");
    else
    {
        dest = (int)destination.sec;
        strcpy(function, function_name[dest]);

        if(!input_selected)
            return CE_PIN_NULL_POINTER;

        if(dest == F_INPUT_FUNCTION)
            get_selected_io((uint32_t)pin, input_selected);
        else
            strcpy(input_selected,"none");
    }

    return BL_LILAC_SOC_OK; 
}

EXPORT_SYMBOL(fi_bl_lilac_mux_get_config_pin_pull);

LILAC_PIN_MUXING_RETURN_CODE fi_bl_lilac_mux_get_config_pin_strength (LILAC_PHYSICAL_PIN pin, PIN_STRENGTH* parameters, char *function, char *input_selected)
{
    volatile MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_DTE dest_io;
    volatile MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_DTE destination;
    int dest;

	CHECK_PIN(pin)

    if(!parameters || !function)
        return CE_PIN_NULL_POINTER;

    destination = read_entry(pin); 

    if(pin >= ONE_DIRECTION_PINS)
    {
        *parameters = destination.ds;
    }
	else
    {
        dest_io = *(MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_DTE*) & destination;
        *parameters = dest_io.ds;
    }

    if(input_selected)
        *input_selected = '\0';

    if(destination.clk == CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_CLK_ENABLE_VALUE)
        strcpy(function,"CLOCK");
    else if(destination.pri == CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_ENABLE_VALUE)
        strcpy(function,"PRIMARY");
    else
    {
        dest = (int)destination.sec;
        strcpy(function, function_name[dest]);

        if(!input_selected)
            return CE_PIN_NULL_POINTER;

        if(dest == F_INPUT_FUNCTION)
            get_selected_io((uint32_t)pin, input_selected);
        else
            strcpy(input_selected,"none");
    }

    return BL_LILAC_SOC_OK; 
}

EXPORT_SYMBOL(fi_bl_lilac_mux_get_config_pin_strength);
/********************************************************
    Get the value of the selected input, when input function
********************************************************/
static void get_selected_io (uint32_t pin, char *function)
{
    volatile MIPS_BLOCKS_VPB_BRIDGE_MIPSD_UART_RXD_SEL_DTE sel_reg;

    BL_MIPS_BLOCKS_VPB_BRIDGE_USB_OVRCUR0_SEL_READ(sel_reg);
    if(sel_reg.sel == pin)
    {
        strcpy(function,"USB0_OVRCUR");
        return ;
    }
	
    BL_MIPS_BLOCKS_VPB_BRIDGE_USB_OVRCUR1_SEL_READ(sel_reg);
    if(sel_reg.sel == pin)
    {
        strcpy(function,"USB1_OVRCUR");
        return ;
    }
	
    BL_MIPS_BLOCKS_VPB_BRIDGE_MIPSD_UART_RXD_SEL_READ(sel_reg);
    if(sel_reg.sel == pin)
    {
        strcpy(function,"MIPSD_UART_RX");
        return ;
    }
	
    BL_MIPS_BLOCKS_VPB_BRIDGE_MS1588_CAPTURE_SEL_READ(sel_reg);
    if(sel_reg.sel == pin)
    {
        strcpy(function,"1588_CAPTURE");
        return ;
    }
	
    BL_MIPS_BLOCKS_VPB_BRIDGE_GPN_TXEN_LP_SEL_READ(sel_reg);
    if(sel_reg.sel == pin)
    {
        strcpy(function,"GPON_TXEN");
        return ;
    }
	
    BL_MIPS_BLOCKS_VPB_BRIDGE_SEC_I2C_SCL_SEL_READ(sel_reg);
    if(sel_reg.sel == pin)
    {
        strcpy(function,"I2C_SCL");
        return ;
    }
	
    BL_MIPS_BLOCKS_VPB_BRIDGE_SEC_I2C_SDA_SEL_READ(sel_reg);
    if(sel_reg.sel == pin)
    {
        strcpy(function,"I2C_SDA");
        return ;
    }
    *function = '\0';
}

/*******************************************************
    Set 'i2c' functions as output thru 'dest' or as input from 'dest'
    Input parameters are : I2C_SCL_OUT(IN), I2C_SDA_OUT(IN)
*******************************************************/
static LILAC_PIN_MUXING_RETURN_CODE f_mux_i2c_pins (LILAC_PIN_FUNCTION function, LILAC_PHYSICAL_PIN pin)
{
	volatile MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_DTE destination;
	volatile MIPS_BLOCKS_VPB_BRIDGE_SEC_I2C_SCL_SEL_DTE source_scl;
	volatile MIPS_BLOCKS_VPB_BRIDGE_SEC_I2C_SDA_SEL_DTE source_sda;
	volatile MIPS_BLOCKS_VPB_BRIDGE_I2C_SEL_DTE i2c;

    destination = read_entry(pin);

    switch (function)
    {
		/* set pin muxing function register of dest to I2C_SCL_OUT function */
		case I2C_SCL_OUT:
	        if(pin == IIC_SCL)
	        {
	            destination.sec = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_SEC_DEFAULT_VALUE;
	            destination.pri = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_ENABLE_VALUE;
	            i2c.sel = CE_MIPS_BLOCKS_VPB_BRIDGE_I2C_SEL_SEL_PRIMARY_VALUE;
	        }
	        else
	        {
	            destination.pri = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_DISABLE_VALUE;
	            destination.sec = F_I2C_SCL ;
	            i2c.sel = CE_MIPS_BLOCKS_VPB_BRIDGE_I2C_SEL_SEL_SECONDARY_VALUE;
	        }
	        break;
		
	    case I2C_SDA_OUT:
	        /* set pin muxing function register of dest to I2C_SDA_OUT function */
	        if(pin == IIC_SDA)
	        {
	            destination.sec = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_SEC_DEFAULT_VALUE;
	            destination.pri = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_ENABLE_VALUE;
	            i2c.sel = CE_MIPS_BLOCKS_VPB_BRIDGE_I2C_SEL_SEL_PRIMARY_VALUE;
	        }
	        else
	        {
	            destination.pri = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_DISABLE_VALUE;
	            destination.sec = F_I2C_SDA ;
	            i2c.sel = CE_MIPS_BLOCKS_VPB_BRIDGE_I2C_SEL_SEL_SECONDARY_VALUE;
	        }
	        break;
		
	     case I2C_SCL_IN:
	         if(pin == IIC_SCL)
	         {
	             destination.sec = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_SEC_DEFAULT_VALUE;
	             destination.pri = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_ENABLE_VALUE;
	             i2c.sel = CE_MIPS_BLOCKS_VPB_BRIDGE_I2C_SEL_SEL_PRIMARY_VALUE;
	         }
	         else
	         {
	            /* set pin muxing function register of I2C_SCL_IN to be dest */
	            source_scl.sel = pin ;
	            BL_MIPS_BLOCKS_VPB_BRIDGE_SEC_I2C_SCL_SEL_WRITE(source_scl);    
	            destination.sec = F_INPUT_FUNCTION ;
	            i2c.sel = CE_MIPS_BLOCKS_VPB_BRIDGE_I2C_SEL_SEL_SECONDARY_VALUE;
	         }
	         break;
		 
	     case I2C_SDA_IN:
	         if(pin == IIC_SDA)
	         {
	             destination.sec = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_SEC_DEFAULT_VALUE;
	             destination.pri = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_PRI_ENABLE_VALUE;
	             i2c.sel = CE_MIPS_BLOCKS_VPB_BRIDGE_I2C_SEL_SEL_PRIMARY_VALUE;
	         }
	         else
	         {
	            /* set pin muxing function register of I2C_SDA_IN to be dest */
	            source_sda.sel = pin ;
	            BL_MIPS_BLOCKS_VPB_BRIDGE_SEC_I2C_SDA_SEL_WRITE(source_sda);    
	            destination.sec = F_INPUT_FUNCTION ;
	            i2c.sel = CE_MIPS_BLOCKS_VPB_BRIDGE_I2C_SEL_SEL_SECONDARY_VALUE;
	         }
	    	 break;
		 
	    default:
	         break;
    }
	
    BL_MIPS_BLOCKS_VPB_BRIDGE_I2C_SEL_WRITE(i2c);
    destination.clk = CE_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_CLK_DISABLE_VALUE;

    write_entry(destination,pin);

    return BL_LILAC_SOC_OK; 
}

/*******************************************************
    Convert the given function to an internal one. 
    It checks the legality of parametersI.
    The internal function is used to configure the pad
*******************************************************/
static int32_t p_internal_function (LILAC_PIN_FUNCTION function, uint32_t number, BL_LILAC_CONTROLLER controller )
{
    int32_t internal = -1;
    switch (function) 
    {
    case GPIO:
        if(controller > DSP)
            internal = -CE_PIN_FUNCTION_ILEGAL_CONTROLLER;
        else
            internal = GPIOC + controller;
        break;
    case TIMER:
        if(number > 3)
            internal = -CE_PIN_FUNCTION_ILEGAL_NUMBER;
        else if(controller > MIPSD)
                internal = -CE_PIN_FUNCTION_ILEGAL_CONTROLLER;
        else
            internal = TIMER0C + number + controller;
        break;
    case INTERRUPT:
        if(number > 9)
            internal = -CE_PIN_FUNCTION_ILEGAL_NUMBER;
        else if (controller > MIPSD)
                internal = -CE_PIN_FUNCTION_ILEGAL_CONTROLLER;
        else
            internal = INTERRUPT0C + number + controller;
        break;
    case USB_PRT_WR:
        if(number > 1)
            internal = -CE_PIN_FUNCTION_ILEGAL_NUMBER;
        else
            internal = USB0_PRT_WR + number;
        break;
    case USB_OVRCUR:
        if(number > 1)
            internal = -CE_PIN_FUNCTION_ILEGAL_NUMBER;
        else
            internal = USB0_OVRCUR + number;
        break;
    case VOIP_TIMER_IRQ:
        if(number > 1)
            internal = -CE_PIN_FUNCTION_ILEGAL_NUMBER;
        else
            internal = VOIP_TIMER0IRQ + number;
        break;
    case VOIP_TIMER_PWM:
        if(number > 1)
            internal = -CE_PIN_FUNCTION_ILEGAL_NUMBER;
        else
            internal = VOIP_TIMER0PWM + number;
        break;
    case F_FSPI_CLK:
        internal = FSPI_CLK_I;
        break;
    case F_SPI_CLK:
        internal = SPI_CLK_I;
        break;
    case ALWAYS_0:
        internal = F_ALWAYS_0;
        break;
    case ALWAYS_1:
        internal = F_ALWAYS_1;
        break;
    default:
        internal = function;
        break;
    }

    return internal;
}

/*******************************************************
    Transform the RGMII pins to their relative offset to their base.  
    The others are the relative offset to the register base.
*******************************************************/
static uint32_t calculate_entry(uint32_t pin)
{
    uint32_t retpin = pin;
	
    if(pin >= ONE_DIRECTION_PINS)
    {
        retpin = pin - GPIO_ONLY_IN_MIN;
        if(pin >= GPIO_ONLY_OUT_MIN)
        {
            retpin -= RGMII_PINS;
        }
    }
    return retpin ;
}

/*******************************************************
    Read the register of the pad and return it to caller              
*******************************************************/
static MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_DTE read_entry(LILAC_PHYSICAL_PIN pin)
{
    volatile uint32_t data;
    uint32_t retpin = calculate_entry((uint32_t)pin);

    if(pin >= ONE_DIRECTION_PINS)
    {
        BL_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_READ_I(data,retpin);
    }
    else
    {
        BL_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_READ_I(data,retpin);
    }

    return *(MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_DTE*)&data;
}
/*******************************************************
              Write the register of the pad              
*******************************************************/
static void write_entry(MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_DTE data_to_write, LILAC_PHYSICAL_PIN pin )
{
    uint32_t data = *(uint32_t*)&data_to_write;
    uint32_t retpin = calculate_entry((uint32_t)pin);
	
    if(pin >= ONE_DIRECTION_PINS)
    {
        BL_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_RGMII_CFG_WRITE_I(data,retpin);
    }
    else
    {
        BL_MIPS_BLOCKS_VPB_BRIDGE_PIN_MUX_IO_CFG_WRITE_I(data,retpin);
    }
}

void bl_lilac_mux_connect_25M_clock(int gpio)
{
    fi_bl_lilac_mux_config_pin_pull(gpio, PULL_Z);
    fi_bl_lilac_mux_config_pin_strength(gpio, S6MA);
	fi_bl_lilac_mux_connect_pin(gpio, CLK_25_MHz, 0, MIPSC);
}
EXPORT_SYMBOL(bl_lilac_mux_connect_25M_clock);

void bl_lilac_mux_connect_ss_mii(void)
{
    fi_bl_lilac_mux_connect_pin(RGMII_RX_D_0, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_RX_D_1, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_RX_D_2, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_RX_D_3, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_RX_CLK, RGMII, 0, MIPSC);
    fi_bl_lilac_mux_connect_pin(RGMII_RX_CTL, RGMII, 0, MIPSC);
}
EXPORT_SYMBOL(bl_lilac_mux_connect_ss_mii);

/********************************************************
    Set 'tx enable negative and positive to always1 or always0 (for invert polarity)
********************************************************/
void fi_bl_lilac_mux_tx_en_constant(void)
{
        fi_bl_lilac_mux_connect_pin(CDR_TX_EN_P, ALWAYS_0, 0, MIPSC);
        fi_bl_lilac_mux_connect_pin(CDR_TX_EN_N, ALWAYS_1, 0, MIPSC);
}
EXPORT_SYMBOL(fi_bl_lilac_mux_tx_en_constant);

/********************************************************
    Set 'tx enable to GPIO control (like in gpon stack)
********************************************************/
void fi_bl_lilac_mux_tx_en_gpio(void)
{
        fi_bl_lilac_mux_connect_pin(CDR_TX_EN_P, GPIO, 0, MIPSC);
        fi_bl_lilac_mux_connect_pin(CDR_TX_EN_N, GPIO, 0, MIPSC);
}
EXPORT_SYMBOL(fi_bl_lilac_mux_tx_en_gpio);

#endif

